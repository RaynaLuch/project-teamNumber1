{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shopping-cart.js"],"sourcesContent":["import { getCart, removeProduct, removeAllProducts} from \"./manage-cart\"\nimport icons from '../img/sprite.svg';\n\nconst list = document.querySelector(\".product-list\")\nconst sub = document.querySelector(\".sub-container\")\nconst deleteBtn = document.querySelector(\".delete-btn\")\nconst count = document.querySelector(\".count\")\nconst totalPriceAmount = document.querySelector(\".amount\")\n\n\nconst emptyBasket = `<div class=\"empty\">\n<img src=\"emptyBasketPicture\" alt=\"empty basket\" class=\"empty-picture\">\n<h2 class=\"empty-main-text\">Your basket is <a href=\"../index.html\" class=\"empty-link\">empty...</a> </h2>\n<p class=\"empty-sub-text\">Go to the main page to select your favorite products and add them to the cart.</p>\n</div>`\n\nfunction createPage() {\n  const products = localStorage.getItem(\"basket\")\n  const parsedProducts = JSON.parse(products)\n  if (parsedProducts !== null) {\n        const numCount = parsedProducts.length\n        list.insertAdjacentHTML('beforeend', createImageMarkup(getCart()));\n        count.textContent = numCount;\n        totalPriceAmount.textContent = totalPrice(parsedProducts);\n      return\n      } \n        count.textContent = 0;\n        sub.innerHTML = emptyBasket;\n}\n\ncreatePage();\n\nlist.addEventListener('click', deleteProduct) \n\nfunction deleteProduct(event) {\n  list.innerHTML = \"\";\n  const currentProduct = event.target.closest(\".product-cart\")\n  const id = currentProduct.dataset.id;\n  removeProduct(id)\n  const products = localStorage.getItem(\"basket\")\n  const parsedProducts = JSON.parse(products)\n  console.log(parsedProducts.length);\n  if (parsedProducts.length === 0) {\n    removeAllProducts()\n}\n  createPage()\n}\n\ndeleteBtn.addEventListener(\"click\",removeProducts)\n\nfunction removeProducts() {\n  removeAllProducts()\n  createPage()\n}\n\nfunction totalPrice(array) {\n  let amm = 0;\n  array.map((({ price }) => amm += price))\n  return amm.toFixed(2);\n}\n\n// MARKUP function\nfunction createImageMarkup(array) {\n  return array\n    .map(\n      ({ _id, img, name, category, size, price }) => `\n      <li class=\"product-cart\" data-id=\"${_id}\">\n      <img\n        class=\"product-picture\"\n        src=\"${img}\"\n        width=\"100\"\n        height=\"100\"\n      alt=\"avocado\"\n      />\n      <div class=\"\">\n        <p class=\"product-name\">${name}</p>\n\n        <div class=\"product-descr\">\n          <p>Category: <span class=\"qwe\">${category}</span></p>\n          <p>Size: <span class=\"qwe\">${size}</span></p>\n        </div>\n\n        <p class=\"product-price\">$${price}</p>\n      </div>\n      <button class=\"cart-btn\" type=\"button\">\n        <svg class=\"\">\n          <use href=\"${icons}#icon-cross\"></use>\n        </svg>\n      </button>\n    </li>\n    `\n    )\n    .join('');\n}\n"],"names":["list","sub","deleteBtn","count","totalPriceAmount","emptyBasket","createPage","products","parsedProducts","numCount","createImageMarkup","getCart","totalPrice","deleteProduct","event","id","removeProduct","removeAllProducts","removeProducts","array","amm","price","_id","img","name","category","size","icons"],"mappings":"0EAGA,MAAMA,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAAM,SAAS,cAAc,gBAAgB,EAC7CC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAmB,SAAS,cAAc,SAAS,EAGnDC,EAAc;AAAA;AAAA;AAAA;AAAA,QAMpB,SAASC,GAAa,CACpB,MAAMC,EAAW,aAAa,QAAQ,QAAQ,EACxCC,EAAiB,KAAK,MAAMD,CAAQ,EAC1C,GAAIC,IAAmB,KAAM,CACvB,MAAMC,EAAWD,EAAe,OAChCR,EAAK,mBAAmB,YAAaU,EAAkBC,EAAO,CAAE,CAAC,EACjER,EAAM,YAAcM,EACpBL,EAAiB,YAAcQ,EAAWJ,CAAc,EAC1D,MACC,CACCL,EAAM,YAAc,EACpBF,EAAI,UAAYI,CACxB,CAEAC,IAEAN,EAAK,iBAAiB,QAASa,CAAa,EAE5C,SAASA,EAAcC,EAAO,CAC5Bd,EAAK,UAAY,GAEjB,MAAMe,EADiBD,EAAM,OAAO,QAAQ,eAAe,EACjC,QAAQ,GAClCE,EAAcD,CAAE,EAChB,MAAMR,EAAW,aAAa,QAAQ,QAAQ,EACxCC,EAAiB,KAAK,MAAMD,CAAQ,EAC1C,QAAQ,IAAIC,EAAe,MAAM,EAC7BA,EAAe,SAAW,GAC5BS,EAAmB,EAErBX,EAAY,CACd,CAEAJ,EAAU,iBAAiB,QAAQgB,CAAc,EAEjD,SAASA,GAAiB,CACxBD,EAAmB,EACnBX,EAAY,CACd,CAEA,SAASM,EAAWO,EAAO,CACzB,IAAIC,EAAM,EACV,OAAAD,EAAM,IAAK,CAAC,CAAE,MAAAE,CAAK,IAAOD,GAAOC,CAAO,EACjCD,EAAI,QAAQ,CAAC,CACtB,CAGA,SAASV,EAAkBS,EAAO,CAChC,OAAOA,EACJ,IACC,CAAC,CAAE,IAAAG,EAAK,IAAAC,EAAK,KAAAC,EAAM,SAAAC,EAAU,KAAAC,EAAM,MAAAL,CAAK,IAAO;AAAA,0CACXC;AAAA;AAAA;AAAA,eAG3BC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAMmBC;AAAA;AAAA;AAAA,2CAGSC;AAAA,uCACJC;AAAA;AAAA;AAAA,oCAGHL;AAAA;AAAA;AAAA;AAAA,uBAIbM;AAAA;AAAA;AAAA;AAAA,KAKlB,EACA,KAAK,EAAE,CACZ"}