{"version":3,"file":"commonHelpers2.js","sources":["../src/img/yellow-shopping-basket.png","../src/js/shopping-cart.js"],"sourcesContent":["export default \"__VITE_ASSET__de6e0cb5__\"","import axios from 'axios';\nimport { getCart, removeProduct, removeAllProducts } from './manage-cart';\nimport icons from '../img/sprite.svg';\nimport image from '../img/yellow-shopping-basket.png';\nimport { toggleModalShCart } from './modal';\n\nconst list = document.querySelector('.product-list');\nconst sub = document.querySelector('.sub-container');\nconst deleteBtn = document.querySelector('.delete-btn');\nconst count = document.querySelector('.count');\nconst totalPriceAmount = document.querySelector('.change');\nconst orderBtn = document.querySelector('.order-form');\nconst BASE_URL = 'https://food-boutique.b.goit.study/api/orders';\n\nconst emptyBasket = `<div class=\"empty\">\n<img src=\"${image}\" alt=\"empty basket\" class=\"empty-picture\">\n<h2 class=\"empty-main-text\">Your basket is <a href=\"../index.html\" class=\"empty-link\">empty...</a> </h2>\n<p class=\"empty-sub-text\">Go to the main page to select your favorite products and add them to the cart.</p>\n</div>`;\n\nfunction createPage() {\n  const products = localStorage.getItem('basket');\n  const parsedProducts = JSON.parse(products);\n  if (parsedProducts !== null) {\n    const numCount = parsedProducts.length;\n    list.insertAdjacentHTML('beforeend', createImageMarkup(getCart()));\n    count.textContent = numCount;\n    totalPriceAmount.textContent = totalPrice(parsedProducts);\n    return;\n  }\n  count.textContent = 0;\n  sub.innerHTML = emptyBasket;\n}\n\ncreatePage();\n\nlist.addEventListener('click', deleteProduct);\n\nfunction deleteProduct(event) {\n  list.innerHTML = '';\n  const currentProduct = event.target.closest('.product-cart');\n  const id = currentProduct.dataset.id;\n  removeProduct(id);\n  const products = localStorage.getItem('basket');\n  const parsedProducts = JSON.parse(products);\n  console.log(parsedProducts.length);\n  if (parsedProducts.length === 0) {\n    removeAllProducts();\n  }\n  createPage();\n}\n\ndeleteBtn.addEventListener('click', removeProducts);\n\nfunction removeProducts() {\n  removeAllProducts();\n  createPage();\n}\n\nfunction totalPrice(array) {\n  let amm = 0;\n  array.map(({ price }) => (amm += price));\n  return amm.toFixed(2);\n}\n\n// MARKUP function\nfunction createImageMarkup(array) {\n  return array\n    .map(\n      ({ _id, img, name, category, size, price }) => `\n      <li class=\"product-cart\" data-id=\"${_id}\">\n      <img\n        class=\"product-picture\"\n        src=\"${img}\"\n        width=\"100\"\n        height=\"100\"\n      alt=\"avocado\"\n      />\n      <div class=\"\">\n        <p class=\"product-name\">${name}</p>\n\n        <div class=\"product-descr\">\n          <p>Category: <span class=\"qwe\">${category}</span></p>\n          <p>Size: <span class=\"qwe\">${size}</span></p>\n        </div>\n\n        <p class=\"product-price\">$${price}</p>\n      </div>\n      <button class=\"cart-btn\" type=\"button\">\n        <svg class=\"\">\n          <use href=\"${icons}#icon-cross\"></use>\n        </svg>\n      </button>\n    </li>\n    `\n    )\n    .join('');\n}\n\norderBtn.addEventListener('submit', placeOrder);\n\nfunction placeOrder(event) {\n  event.preventDefault();\n  const productList = getCart();\n  const productsToBuy = getId(productList);\n  axios\n    .post(BASE_URL, {\n      email: event.target.elements.email.value,\n      products: productsToBuy,\n    })\n    .then(res => {\n      if (res.status === 201) {\n        removeProducts();\n        toggleModalShCart();\n      }\n    })\n    .catch(error => console.log(error.message));\n}\n\nfunction getId(array) {\n  return array.map(item => ({\n    productId: item._id,\n    amount: 1,\n  }));\n}\n"],"names":["image","list","sub","deleteBtn","count","totalPriceAmount","orderBtn","BASE_URL","emptyBasket","createPage","products","parsedProducts","numCount","createImageMarkup","getCart","totalPrice","deleteProduct","event","id","removeProduct","removeAllProducts","removeProducts","array","amm","price","_id","img","name","category","size","icons","placeOrder","productList","productsToBuy","getId","axios","res","toggleModalShCart","error","item"],"mappings":"2HAAA,MAAeA,EAAA,kECMTC,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAAM,SAAS,cAAc,gBAAgB,EAC7CC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAmB,SAAS,cAAc,SAAS,EACnDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAW,gDAEXC,EAAc;AAAA,YACRR;AAAA;AAAA;AAAA,QAKZ,SAASS,GAAa,CACpB,MAAMC,EAAW,aAAa,QAAQ,QAAQ,EACxCC,EAAiB,KAAK,MAAMD,CAAQ,EAC1C,GAAIC,IAAmB,KAAM,CAC3B,MAAMC,EAAWD,EAAe,OAChCV,EAAK,mBAAmB,YAAaY,EAAkBC,EAAO,CAAE,CAAC,EACjEV,EAAM,YAAcQ,EACpBP,EAAiB,YAAcU,EAAWJ,CAAc,EACxD,MACD,CACDP,EAAM,YAAc,EACpBF,EAAI,UAAYM,CAClB,CAEAC,IAEAR,EAAK,iBAAiB,QAASe,CAAa,EAE5C,SAASA,EAAcC,EAAO,CAC5BhB,EAAK,UAAY,GAEjB,MAAMiB,EADiBD,EAAM,OAAO,QAAQ,eAAe,EACjC,QAAQ,GAClCE,EAAcD,CAAE,EAChB,MAAMR,EAAW,aAAa,QAAQ,QAAQ,EACxCC,EAAiB,KAAK,MAAMD,CAAQ,EAC1C,QAAQ,IAAIC,EAAe,MAAM,EAC7BA,EAAe,SAAW,GAC5BS,IAEFX,GACF,CAEAN,EAAU,iBAAiB,QAASkB,CAAc,EAElD,SAASA,GAAiB,CACxBD,IACAX,GACF,CAEA,SAASM,EAAWO,EAAO,CACzB,IAAIC,EAAM,EACV,OAAAD,EAAM,IAAI,CAAC,CAAE,MAAAE,CAAO,IAAMD,GAAOC,CAAM,EAChCD,EAAI,QAAQ,CAAC,CACtB,CAGA,SAASV,EAAkBS,EAAO,CAChC,OAAOA,EACJ,IACC,CAAC,CAAE,IAAAG,EAAK,IAAAC,EAAK,KAAAC,EAAM,SAAAC,EAAU,KAAAC,EAAM,MAAAL,CAAK,IAAO;AAAA,0CACXC;AAAA;AAAA;AAAA,eAG3BC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAMmBC;AAAA;AAAA;AAAA,2CAGSC;AAAA,uCACJC;AAAA;AAAA;AAAA,oCAGHL;AAAA;AAAA;AAAA;AAAA,uBAIbM;AAAA;AAAA;AAAA;AAAA,KAKlB,EACA,KAAK,EAAE,CACZ,CAEAxB,EAAS,iBAAiB,SAAUyB,CAAU,EAE9C,SAASA,EAAWd,EAAO,CACzBA,EAAM,eAAc,EACpB,MAAMe,EAAclB,IACdmB,EAAgBC,EAAMF,CAAW,EACvCG,EACG,KAAK5B,EAAU,CACd,MAAOU,EAAM,OAAO,SAAS,MAAM,MACnC,SAAUgB,CAChB,CAAK,EACA,KAAKG,GAAO,CACPA,EAAI,SAAW,MACjBf,IACAgB,IAER,CAAK,EACA,MAAMC,GAAS,QAAQ,IAAIA,EAAM,OAAO,CAAC,CAC9C,CAEA,SAASJ,EAAMZ,EAAO,CACpB,OAAOA,EAAM,IAAIiB,IAAS,CACxB,UAAWA,EAAK,IAChB,OAAQ,CACT,EAAC,CACJ"}