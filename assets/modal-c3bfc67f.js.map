{"version":3,"file":"modal-c3bfc67f.js","sources":["../../src/js/header.js","../../src/img/sprite.svg","../../src/js/updatePopularCard.js","../../src/js/manage-cart.js","../../src/js/modal.js"],"sourcesContent":["export function setNumItems() {\n    const itemsNum = JSON.parse(localStorage.getItem(\"basket\"))?.length ?? 0;\n    const iCount = document.querySelector(\".itemsCount\");\n    iCount.innerText = itemsNum;\n    // console.log(itemsNum);\n  };\n  setNumItems()","export default \"__VITE_ASSET__ba4252b0__\"","import icons from '../img/sprite.svg';\n\nexport default function updatePopularCard(id, isInCart) {\n  const popularList = document.querySelector('.popular-product-list');\n  const cardEl = popularList.querySelector(`[data-id=\"${id}\"]`);\n  if (!cardEl) {\n    return;\n  }\n  if (isInCart) {\n    cardEl.classList.add('product-preview--in-cart');\n  } else {\n    cardEl.classList.remove('product-preview--in-cart');\n  }\n  const buttonEl = cardEl.children[1].children[0].children[1];\n  buttonEl.children[0].children[0].setAttribute(\n    'href',\n    `${icons}#${isInCart ? 'icon-check' : 'icon-cart'}`\n  );\n}\n","import { setNumItems } from './header.js';\nimport updatePopularCard from './updatePopularCard.js';\n\nconst STORAGE = 'basket';\n\nfunction addProduct(product) {\n  const shoppingCart = getCart();\n  shoppingCart.push(product);\n  localStorage.setItem(STORAGE, JSON.stringify(shoppingCart));\n  setNumItems();\n  try {\n    updatePopularCard(product._id, true);\n  } catch (error) {}\n}\n\nfunction findProductInCart(id) {\n  const shoppingCart = getCart();\n  return shoppingCart.find(p => p?._id === id);\n}\n\nfunction getCart() {\n  let shoppingCart;\n  let shoppingCartStr = localStorage.getItem(STORAGE);\n  if (!shoppingCartStr) {\n    shoppingCart = [];\n  } else {\n    shoppingCart = JSON.parse(shoppingCartStr);\n  }\n  return shoppingCart;\n}\n\nfunction removeProduct(id) {\n  let shoppingCart = getCart();\n  shoppingCart = shoppingCart.filter(p => p._id !== id);\n  localStorage.setItem(STORAGE, JSON.stringify(shoppingCart));\n  setNumItems();\n  try {\n    updatePopularCard(id, false);\n  } catch (error) {}\n}\n\nfunction removeAllProducts() {\n  localStorage.removeItem(STORAGE);\n  setNumItems();\n}\n\nexport {\n  addProduct,\n  findProductInCart,\n  removeProduct,\n  removeAllProducts,\n  getCart,\n};\n","import axios from 'axios';\nimport { addProduct, findProductInCart, removeProduct } from './manage-cart.js';\n\nconst BASE_URL = 'https://food-boutique.b.goit.study/api';\n\nconst closeModalBtn = document.querySelector('[data-modal-close]');\nconst modal = document.querySelector('[data-modal]');\n\nconst modalCartBtn = document.querySelector('.modal-cart-button');\n\nfunction toggleModal() {\n  document.body.classList.toggle('modal-open');\n\n  modal.classList.toggle('is-hidden');\n}\n\nconst modalImgField = document.querySelector('#modal-img');\nconst modalNameField = document.querySelector('#modal-name');\nconst modalCategoryField = document.querySelector('#modal-category');\nconst modalSizeField = document.querySelector('#modal-size');\nconst modalPopularityField = document.querySelector('#modal-popularity');\nconst modalDeskField = document.querySelector('#modal-desc');\nconst modalPriceField = document.querySelector('#modal-price');\n\nexport default async function showProductCard(id) {\n  let response;\n  try {\n    response = await axios(BASE_URL + '/products/' + id);\n    console.log(response);\n    modalImgField.src = response.data.img;\n    modalNameField.textContent = response.data.name;\n    modalImgField.alt = modalNameField.textContent;\n    modalCategoryField.textContent = response.data.category;\n    modalSizeField.textContent = response.data.size;\n    modalPopularityField.textContent = response.data.popularity;\n    modalDeskField.textContent = response.data.desc;\n    modalPriceField.textContent = '$' + response.data.price;\n    toggleModal();\n    const removeProductHandler = event => {\n      const product = response.data;\n      removeProduct(product._id);\n      modalCartBtn.removeEventListener('click', removeProductHandler);\n      modalCartBtn.firstChild.textContent = 'Add to';\n      modalCartBtn.addEventListener('click', addProductHandler);\n    };\n    const addProductHandler = event => {\n      const product = response.data;\n      addProduct(product);\n      modalCartBtn.removeEventListener('click', addProductHandler);\n      modalCartBtn.firstChild.textContent = 'Remove from';\n      modalCartBtn.addEventListener('click', removeProductHandler);\n    };\n\n    if (findProductInCart(response.data._id)) {\n      modalCartBtn.firstChild.textContent = 'Remove from';\n      modalCartBtn.addEventListener('click', removeProductHandler);\n    } else {\n      modalCartBtn.firstChild.textContent = 'Add to';\n      modalCartBtn.addEventListener('click', addProductHandler);\n    }\n\n    closeModalBtn.addEventListener('click', closeModalHandler);\n\n    function closeModalHandler() {\n      modalCartBtn.removeEventListener('click', addProductHandler);\n      modalCartBtn.removeEventListener('click', removeProductHandler);\n      closeModalBtn.removeEventListener('click', closeModalHandler);\n      document.removeEventListener('keyup', keyPressHandler);\n      toggleModal();\n    }\n\n    document.addEventListener('keyup', keyPressHandler);\n    function keyPressHandler(e) {\n      if (e.keyCode === 27) {\n        toggleModal();\n        modalCartBtn.removeEventListener('click', addProductHandler);\n        modalCartBtn.removeEventListener('click', removeProductHandler);\n        document.removeEventListener('keyup', keyPressHandler);\n        closeModalBtn.removeEventListener('click', closeModalHandler);\n      }\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nconst closeModalBtnShCart = document.querySelector(\n  '[data-modal-close-shopping-cart]'\n);\nconst modalShCart = document.querySelector('[data-modal-shopping-cart]');\nconst shoppingCartContainer = document.querySelector(\n  '.shopping-cart-container'\n);\n\nfunction toggleModalShCart() {\n  document.body.classList.toggle('modal-open');\n  modalShCart.classList.toggle('is-hidden');\n}\n\nif (shoppingCartContainer) {\n  closeModalBtnShCart?.addEventListener('click', toggleModalShCart);\n\n  // const orderModalBtn = document.querySelector('.order-btn');\n  // orderModalBtn?.addEventListener('click', () => toggleModalShCart());\n\n  // modalShCart?.addEventListener('keydown', keyPressHandlerShCart);\n  document.addEventListener('keydown', keyPressHandlerShCart);\n  function keyPressHandlerShCart(e) {\n    if (e.keyCode === 27) {\n      toggleModalShCart();\n      // modalShCart?.removeEventListener('keydown', keyPressHandlerShCart);\n      document.removeEventListener('keydown', keyPressHandlerShCart);\n    }\n  }\n}\n\nexport { toggleModalShCart };\n"],"names":["setNumItems","itemsNum","_a","iCount","icons","updatePopularCard","id","isInCart","cardEl","STORAGE","addProduct","product","shoppingCart","getCart","findProductInCart","p","shoppingCartStr","removeProduct","removeAllProducts","BASE_URL","closeModalBtn","modal","modalCartBtn","toggleModal","modalImgField","modalNameField","modalCategoryField","modalSizeField","modalPopularityField","modalDeskField","modalPriceField","showProductCard","response","closeModalHandler","addProductHandler","removeProductHandler","keyPressHandler","e","axios","event","error","closeModalBtnShCart","modalShCart","shoppingCartContainer","toggleModalShCart","keyPressHandlerShCart"],"mappings":"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"}