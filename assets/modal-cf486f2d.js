import{a as C}from"./vendor-cb0d5946.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();function a(){var o;const t=((o=JSON.parse(localStorage.getItem("basket")))==null?void 0:o.length)??0,e=document.querySelector(".itemsCount");e.innerText=t}a();const S="/project-teamNumber1/assets/sprite-851c6254.svg";function h(t,e){const c=document.querySelector(".popular-product-list").querySelector(`[data-id="${t}"]`);if(!c||(e?c.classList.add("product-preview--in-cart"):c.classList.remove("product-preview--in-cart"),!c))return;c.children[1].children[0].children[1].children[0].children[0].setAttribute("href",`${S}#${e?"icon-check":"icon-cart"}`)}const d="basket";function L(t){const e=f();e.push(t),localStorage.setItem(d,JSON.stringify(e)),a();try{h(t._id,!0)}catch{}}function k(t){return f().find(o=>(o==null?void 0:o._id)===t)}function f(){let t,e=localStorage.getItem(d);return e?t=JSON.parse(e):t=[],t}function E(t){let e=f();e=e.filter(o=>o._id!==t),localStorage.setItem(d,JSON.stringify(e)),a();try{h(t,!1)}catch{}}function _(){localStorage.removeItem(d),a()}const q="https://food-boutique.b.goit.study/api",u=document.querySelector("[data-modal-close]"),x=document.querySelector("[data-modal]"),i=document.querySelector(".modal-cart-button");function m(){x.classList.toggle("is-hidden")}const y=document.querySelector("#modal-img"),g=document.querySelector("#modal-name"),P=document.querySelector("#modal-category"),b=document.querySelector("#modal-size"),N=document.querySelector("#modal-popularity"),O=document.querySelector("#modal-desc"),F=document.querySelector("#modal-price");async function H(t){let e;try{let n=function(){i.removeEventListener("click",c),i.removeEventListener("click",o),u.removeEventListener("click",n),document.removeEventListener("keyup",r),m()},r=function(s){s.keyCode===27&&(m(),i.removeEventListener("click",c),i.removeEventListener("click",o),document.removeEventListener("keyup",r),u.removeEventListener("click",n))};e=await C(q+"/products/"+t),console.log(e),y.src=e.data.img,g.textContent=e.data.name,y.alt=g.textContent,P.textContent=e.data.category,b.textContent=e.data.size,N.textContent=e.data.popularity,O.textContent=e.data.desc,F.textContent="$"+e.data.price,m();const o=s=>{const l=e.data;E(l._id),i.removeEventListener("click",o),i.firstChild.textContent="Add to",i.addEventListener("click",c)},c=s=>{const l=e.data;L(l),i.removeEventListener("click",c),i.firstChild.textContent="Remove from",i.addEventListener("click",o)};k(e.data._id)?(i.firstChild.textContent="Remove from",i.addEventListener("click",o)):(i.firstChild.textContent="Add to",i.addEventListener("click",c)),u.addEventListener("click",n),document.addEventListener("keyup",r)}catch(o){console.log(o)}}const p=document.querySelector("[data-modal-close-shopping-cart]"),I=document.querySelector("[data-modal-shopping-cart]"),w=document.querySelector(".shopping-cart-container");function v(){I.classList.toggle("is-hidden")}if(w){let t=function(e){e.keyCode===27&&(v(),document.removeEventListener("keydown",t))};p==null||p.addEventListener("click",v),document.addEventListener("keydown",t)}export{L as a,_ as b,k as f,f as g,S as i,E as r,H as s,v as t};
//# sourceMappingURL=modal-cf486f2d.js.map
