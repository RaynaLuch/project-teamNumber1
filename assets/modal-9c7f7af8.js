import{a as S}from"./vendor-cb0d5946.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();function a(){var r;const t=((r=JSON.parse(localStorage.getItem("basket")))==null?void 0:r.length)??0,e=document.querySelector(".itemsCount");e.innerText=t}a();const E="/project-teamNumber1/assets/sprite-851c6254.svg";function k(t,e){const c=document.querySelector(".popular-product-list").querySelector(`[data-id="${t}"]`);if(!c||(e?c.classList.add("product-preview--in-cart"):c.classList.remove("product-preview--in-cart"),!c))return;c.children[1].children[0].children[1].children[0].children[0].setAttribute("href",`${E}#${e?"icon-check":"icon-cart"}`)}const l="basket";function q(t){const e=g();e.push(t),localStorage.setItem(l,JSON.stringify(e)),a();try{k(t._id,!0)}catch{}}function b(t){return g().find(r=>r._id===t)}function g(){let t,e=localStorage.getItem(l);return e?t=JSON.parse(e):t=[],t}function x(t){let e=g();e=e.filter(r=>r._id!==t),localStorage.setItem(l,JSON.stringify(e)),a();try{k(t,!1)}catch{}}function H(){localStorage.removeItem(l),a()}const P="https://food-boutique.b.goit.study/api",m=document.querySelector("[data-modal-close]"),N=document.querySelector("[data-modal]"),i=document.querySelector(".modal-cart-button");function p(){N.classList.toggle("is-hidden")}const h=document.querySelector("#modal-img"),L=document.querySelector("#modal-name"),O=document.querySelector("#modal-category"),F=document.querySelector("#modal-size"),I=document.querySelector("#modal-popularity"),A=document.querySelector("#modal-desc"),_=document.querySelector("#modal-price");async function J(t){let e;try{let o=function(){i.removeEventListener("click",c),i.removeEventListener("click",r),m.removeEventListener("click",o),document.removeEventListener("keyup",n),p()},n=function(s){s.keyCode===27&&(p(),i.removeEventListener("click",c),i.removeEventListener("click",r),document.removeEventListener("keyup",n),m.removeEventListener("click",o))};e=await S(P+"/products/"+t),console.log(e),h.src=e.data.img,L.textContent=e.data.name,h.alt=L.textContent,O.textContent=e.data.category,F.textContent=e.data.size,I.textContent=e.data.popularity,A.textContent=e.data.desc,_.textContent="$"+e.data.price,p();const r=s=>{const u=e.data;x(u._id),i.removeEventListener("click",r),i.firstChild.textContent="Add to",i.addEventListener("click",c)},c=s=>{const u=e.data;q(u),i.removeEventListener("click",c),i.firstChild.textContent="Remove from",i.addEventListener("click",r)};b(e.data._id)?(i.firstChild.textContent="Remove from",i.addEventListener("click",r)):(i.firstChild.textContent="Add to",i.addEventListener("click",c)),m.addEventListener("click",o),document.addEventListener("keyup",n)}catch(r){console.log(r)}}const f=document.querySelector("[data-modal-close-shopping-cart]"),d=document.querySelector("[data-modal-shopping-cart]");f==null||f.addEventListener("click",v);function v(){d.classList.toggle("is-hidden")}const y=document.querySelector(".order-btn");y==null||y.addEventListener("click",()=>v());d==null||d.addEventListener("keypress",C);function C(t){t.keyCode===27&&(v(),d==null||d.removeEventListener("keypress",C))}export{q as a,H as b,b as f,g,E as i,x as r,J as s};
//# sourceMappingURL=modal-9c7f7af8.js.map
